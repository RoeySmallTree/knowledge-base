# CABAL User Prompt: Inspect (V4.7)

**Step:** Inspect  
**Role:** Watchdog

---

## Source Variables (User Prompt)

| Variable | Source Path |
|----------|-------------|
| `session.mission_charter` | `SessionContext` |
| `session.underlying_objectives` | `SessionContext` |
| `session.current_round` | `SessionContext` |
| `members` | `stepContext.members` |
| `productsToReview[]` | Filtered `ProductContext[]` |
| `product.versions[]` | `VersionContext[]` |
| `product.collabs[]` | `CollabContext[]` |

---

## User Prompt Template

[MISSION]
{{session.mission_charter}}

[OBJECTIVES]
{{session.underlying_objectives}}

[TEAM]
{{#each members}}
{{#unless (eq this.id currentMember.id)}}
- {{this.name}} ({{this.team_role}}): {{this.operative_responsibility}}
{{/unless}}
{{/each}}

[ROUND]
{{session.current_round}}

{{#each productsToReview}}

[PRODUCT TO REVIEW: {{this.name}}]
ID: {{this.id}}
Type: {{this.type}}
Owner: {{this.owner_name}} ({{this.owner_id}})
Status: {{this.status}}

[DEFINITION OF DONE]
{{this.definition_of_done}}

[VERSION HISTORY]
{{#each this.versions}}
V{{this.version_number}} by {{this.author_name}}
{{#if this.directive}}Directive: {{this.directive}}{{/if}}
{{#if this.change_summary}}Change: {{this.change_summary}}{{/if}}
{{#if (eq this.id ../selected_version_id)}}✅ Selected for Review{{/if}}
{{/each}}

[CONTENT TO REVIEW (V{{this.selectedVersion.version_number}})]
{{this.selectedVersion.content}}

[PEER FEEDBACK ALREADY RECEIVED]
{{#if this.latestCollabs.length}}
{{#each this.latestCollabs}}
> {{this.author_name}} ({{this.importance}}): "{{this.content}}"
{{/each}}
{{else}}
(No peer feedback yet)
{{/if}}

[RELATED PRODUCTS]
{{#each this.relatedProducts}}
- {{this.name}} ({{this.owner_name}}): {{this.status}} — {{#if this.latestVersion}}V{{this.latestVersion.version_number}}{{else}}No version{{/if}}
{{/each}}

{{/each}}

[VALID IDS]
{{#each allProducts}}
{{this.id}} → "{{this.name}}" [{{this.type}}]
{{/each}}

---

## Filled Example

[MISSION]
Build MenuMaster, a SaaS for restaurants to manage dynamic menus with real-time inventory sync.

[OBJECTIVES]
1. Reduce menu update time to 30 seconds
2. Achieve 90% uptime for inventory sync
3. Acquire 100 paying customers in 6 months

[TEAM]
- Alex (tech-lead): Technical architecture, API design, backend
- Jordan (product-manager): UX, user flows, feature prioritization
- Casey (growth-marketer): GTM, positioning, customer acquisition

[ROUND]
2

[PRODUCT TO REVIEW: Technical Architecture Spec]
ID: 660e8400-e29b-41d4-a716-446655440001
Type: Content
Owner: Alex (alpha)
Status: pending_review

[DEFINITION OF DONE]
- System diagram showing all services and their interactions
- Narrative explaining data flow for menu updates and inventory sync
- API boundary definitions with rate limiting
- Authentication and authorization documentation
- Reviewed by product-manager for feasibility

[VERSION HISTORY]
V1 by Alex
Directive: Create the technical blueprint for <30sec menu updates.
Change: Initial architecture covering core services.
✅ Selected for Review

[CONTENT TO REVIEW (V1)]
# Technical Architecture Spec V1

## 1. System Overview
MenuMaster is a distributed system with three core services.

## 2. Services

### 2.1 Menu Service
- POST /restaurants/:id/menus
- PUT /menus/:id/items/:itemId
- GET /menus/:id (public)

### 2.2 Inventory Sync Service
- Polls POS every 60 seconds
- Compares with cached state
- Updates Menu Service on change

### 2.3 QR Generator Service
- Generates unique QR per restaurant/table
- Stores in S3

## 3. API Boundaries
| Endpoint | Auth |
|----------|------|
| /public/* | None |
| /menus/* | JWT |

## 4. Infrastructure
- Hosting: Vercel (FE), Railway (BE)
- Database: Neon PostgreSQL
- Auth: Clerk

[PEER FEEDBACK ALREADY RECEIVED]
> Jordan (5): "Could we add bulk import? Owners have existing menus in spreadsheets."

[RELATED PRODUCTS]
- Core User Flows (Jordan): in_progress — V1
- API Design Document (Alex): pending — No version
- Database Schema (Alex): pending — No version

[VALID IDS]
660e8400-e29b-41d4-a716-446655440001 → "Technical Architecture Spec" [Content]
660e8400-e29b-41d4-a716-446655440002 → "Core User Flows" [Content]
660e8400-e29b-41d4-a716-446655440003 → "API Design Document" [Content]
660e8400-e29b-41d4-a716-446655440004 → "Database Schema" [Content]
